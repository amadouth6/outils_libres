\documentclass[a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\graphicspath{ {/home/amadou/Bureau/IUT/Outils_Libres_Cote_client/Capture/} }


\title{Rapport Outils Libres} 

\author{THIAM Amadou Moctar et KNORST Nicolas }
\date{Février 2022}

\newpage
\begin{document}

\maketitle

\section{Efficacité environnement de travail}

\subsection{ Exercice 1 : }

\begin{itemize}
    \item \textbf{Désactivation de notre souris} : \\
    \\ \# \textit{\textbf{xinput --list}} → permet de lister les périphériques connectés ; \\
    \# \textit{\textbf{xinput -set-prop "id" "Device Enabled" 0}}→ pour désactiver la souris en remplaçant \textit{\textbf{id}} par la valeur affichée.\\
    
\item \textbf{Tableau de problèmes et de ses correctifs :} \\

\end{itemize} 
\begin{tabular}{|l|l|}
     \hline 
     Problème & Correctif\\
     \hline
     Ouvri le terminal sous Ubuntu & Ctrl + Alt + T\\
     \hline
     Démarrer Firefox ou Brave depuis le terminal & \$ firefox ou brave-browser \\
     \hline
     Saisir directement sur la barre d'URL & Ctrl + E \\
     \hline
     Page précédente / suivante & Alt + ← | Alt + → \\
     \hline
     Switcher entre les onglets du terminal (raccourcis créer) & Alt + ← | Alt + → \\
     \hline
\end{tabular}

\subsection{Exercice 2 :}

\begin{itemize}
    \item Nous avons choisi TypingClub comme site web pour amélioré notre saisie automatique ;
    \item Nous l'avons choisi parce que : 
    \begin{itemize}
        \item Une interface utilisateur belle et propre ;
        \item Possibilité de s'entrainer pas à pas pour progresser à son rythme et avoir un aperçu de ses progrès ;
        \item Possibilité de créer un compte et de sauvegarder ses ses progrès ;
        \item Possibilité d'apprendre en fonction de la disposition de son clavier ;
        \item Possibilité d'apprendre en mode jeu. 
        \item Capture de l'interface
    \end{itemize}
    
\end{itemize}

\begin{center}
	\includegraphics[scale=0.30]{40} \\
	\hfill \break
	\hfill \break
	\includegraphics[scale=0.30]{41}
\end{center}

\subsection{Exercice 3 :}
	\begin{itemize}
		\item Effectuer les tutoriels avec VIM :
	\end{itemize}
	\begin{center}
		\includegraphics[scale=0.30]{42}
	\end{center}
	\begin{itemize}
		\item Paramétrage de GNU Readline :
			\begin{itemize}
				\item \textit{\textbf{\$ set -o vi}}
			\end{itemize}
		\item L'éditeur choisi est Vim
		\item  Vim comme éditeur par défaut : dans le fichier \textit{.bashrc} : 
			\begin{itemize}
			\item \textit{\textbf{export VISUAL=vim}}
			\item \textit{\textbf{export EDITOR="\$VISUAL"}}
		\end{itemize}
	\end{itemize}
	
\subsection{Exercice 4 :}
	\begin{itemize}
		\item Regarder notre historique :
		\begin{itemize}
			\item \textit{\textbf{\$ history}} ou bien \textit{\textbf{\$ cat /home/user/.bash\_history}}
		\end{itemize}
		\item Oui il y en certaines commandes sensibles et la façon de gérer cela est d'empêcher ces commandes de l'historique bash lui-même
		\item Pour éviter que certaines commandes de l'historique n'apparaissent, dans le fichier \textit{.bashrc}, on ajoute la ligne suivante :
		\begin{itemize}
			\item \textit{HISTIGNORE = ls cd pwd}
		\end{itemize}
		
	\end{itemize}

\subsection{Exercice 5 :}
	\begin{itemize}
		\item Écriture d'une bash fonction mkcd : \\ Dans le fichier \textit{.bashrc}, on ajoute les lignes suivantes : 
		
		\begin{itemize}
			\item \textit{mkcd() \{ \\ mkdir "\$1" ; \\ cd "\$1" ; \\ \}}
		\end{itemize}
		
		\item Écriture de la fonction gitemergency :
			\begin{itemize}
				\item \textit{gitemergency() \{ \\
                git add .; \\
                git commit -m "@"; \\
                git push origin Head; \\
            \}}
			\end{itemize}
	\end{itemize}
	
\subsection{Exercice 6 : }

	\begin{itemize}
		\item \textbf{\textit{\$ touch backup.sh }}→ création du fichier backup
		\item \textbf{\textit{\$ chmod +x backup.sh}} 
		\item Code du fichier \textit{bash\_completion} : 
	\end{itemize}
	\begin{tabular}{|l|}
		\hline
			\hfill \break \\
			if ! shopt -oq posix; then \\
  			if [ -f /usr/share/bash-completion/bash\_completion ]; then \\
    				. /usr/share/bash-completion/bash\_completion \\
  			elif [ -f /etc/bash\_completion ]; then \\
    				. /etc/bash\_completion \\
  			fi \\
			fi \\	
		\hline
	\end{tabular}
	\begin{itemize}
		\item \textbf{\textit{\$ source bash\_autocompletion}}
	\end{itemize}
	

\subsection{Exercice 7 : }
	\begin{itemize}
		\item Installation de ZSH :
			\begin{itemize}
				\item \textbf{\textit{(sudo) apt install zsh -y }}
			\end{itemize}
		\item Modification du prompt pour inclure les informations de vagrant : \\
		Les configurations sont à faire dans le fichier \textit{.zshrc}, en spécifiant : 
		\begin{itemize}
		 \item \textit{ZSH\_THEME=agnoster} → pour spécifier le nom du thème choisi ;
		 \item \textit{plugin=vagrant-prompt.plugin.zsh} → choisir le nom du 
		 \item Dans le fichier \textit{.oh-my-zsh/themes/agnoster.zsh-theme}, on ajoute les lignes suivantes : 
		\end{itemize}
	\end{itemize}
	PROMPT='\%\{\$fg[\$NCOLOR]\%\}\%B\%n\%b\%\{\$reset\_color\%\}:\%\{\$fg[blue]\%\}\%B\%c/\%b\%\{\$reset\_color\%\} \$(vagrant\_prompt\_info)\$(svn\_prompt\_info)\$(git\_prompt\_info)\%(!.\#.\$)' → modification de variable de prompt ;
	
	\hfill \break
	- Ajout des variables de couleurs : \\
	\includegraphics[scale=0.5]{44}
	

\subsection*{Exercice 9 :}
	\begin{itemize}
		\item Installation de trois émulateurs de terminaux à savoir guake, roxterm et xterm: 
			\begin{itemize}
				\item \textit{\textbf{\$ sudo apt-get install -y guake roxterm xterm}}
			\end{itemize}
		\item Nous avons choisi Guake comme émulateur parce qu'il est : léger, rapide, multi-tab et hautement personnalisable.
		\item Suppression des autres : 
		\begin{itemize}
				\item \textit{\textbf{\$ sudo apt-get --purge remove -y roxterm xterm}}
			\end{itemize}
	\end{itemize}
	
\newpage
	\section{SSH :}
	\subsection{Exerice 1 :}
	\begin{itemize}
		\item \textbf{\textit{\$ vagrant up }} →  Démarrer l'environnement Vagrant : 
		\item \textbf{\textit{\$ ssh bob@srv.local }} → connexion avec l'utilisateur bob
		\item \textbf{\textit{\$ ssh alice@srv.local }} → connexion avec l'utilisateur alice
		\item \textbf{\textit{\$ ssh carole@srv.local }} → connexion avec l'utilisateur carole 
		\item Vérification qu'on est sur la Vagrant :
	\end{itemize}
	
	\includegraphics[scale=0.5]{51}
	\includegraphics[scale=0.5]{52}
	\includegraphics[scale=0.5]{53}
	\begin{itemize}
		\item On remarque que la commande de la connexion SSH sur la machine vagrant et présente
	\end{itemize}
	
	\subsection*{Exercice 2 :}
	\begin{itemize}
		\item Création d'une paire de clé privée et public :
			\begin{itemize}
				\item \textbf{\textit{\$ ssh-keygen -q -t rsa -f my\_keys -C '' -N 'passer'}}
			\end{itemize}
		\item Dépôt de la clé publique :
			\begin{itemize}
				\item \textbf{\textit{\$ ssh-copy-id  -i ~/.ssh/my\_keys.pub alice@cli.local}}
			\end{itemize}
	\end{itemize}
	
	\includegraphics[scale=0.50]{54}
	
	\begin{itemize}
		\item Dépôt manuelle de la clé publique vers bob:
			\begin{itemize}
				\item \textbf{\textit{\$ scp  ~/.ssh/my\_key.pub  bob@cli.local :\~/.ssh/authorized\_keys}}
				\item \textbf{\textit{\$ ssh bob@cli.local}}
			\end{itemize}
	\end{itemize}
	
	\includegraphics[scale=0.5]{55}
	
	\begin{itemize}
		\item La passphrase d’une clé privée permet d’ajouter une couche supplémentaire de sécurité en cas de vol ou de divulgation accidentelle de la clé privée.

	\end{itemize}
	
	
	\subsection{Exercice 3 :}
	\begin{itemize}
		\item Suppression des adresse ajoutées dans le fichier "known\_host"
			\begin{itemize}
				\item \textbf{\textit{\$ ssh-keygen -R  cli.local}}
				\item \textbf{\textit{\$ ssh-keygen -R  srv.local}}
			\end{itemize}		
		\item Ajout de la clé publique de srv (192.168.56.3)
			\begin{itemize}
				\item \textbf{\textit{\$ ssh-keyscan -H  192.168.56.3 >> known\_hosts}}
			\end{itemize}
	\end{itemize}
	
	\begin{itemize}
		\item –	Création du fichier de configuration SSH \\
		\textbf{\textit{Host bc \\          
  					Hostname 192.168.56.2 \\
  					User bob \\
  					Port 22 \\
  					PreferredAuthentications publickey \\
  					IdentityFile ~/.ssh/My\_keys.pub \\ }}
 		
	\end{itemize}
	
	\subsection{Exercice 3-bis :}
	\begin{itemize}
		\item Connexion à la machine cli en utilisant SFTP
			\begin{itemize}
				\item \textbf{\textit{\$ sftp alice@cli.local}}
				\item \textbf{\textit{\$ put /home/amadoou/Bureau/exemple\_file.txt}} → copie d'un fichier de la machine local vers cli ;
				\item \textbf{\textit{\$ echo "remote file" > remote\_file}} → création d'un fichier sur cli ;
				\item \textbf{\textit{\$ get remote\_file /home/amadou/Bureau/}} → copie du fichier vers la machine hôte.
			\end{itemize}
		\item Connexion à cli avec SSHFS
			\begin{itemize}
				\item \textbf{\textit{\$ mkdir \~/mount\_rep/}} → création du répertoire de montage ;
				\item \textbf{\textit{\$ sshfs alice@cli.local:/home/alice/ \~/mount\_rep/}} → 
			\end{itemize}
	\end{itemize}
	
	\subsection{Exercice 4 :}
	\begin{itemize}
		\item Création d’un tunnel SSH avec SRV à travers CLI
			\begin{itemize}
				\item \textbf{\textit{\$ ssh -N -f -L 8000:srv.local:80 alice@cli.local}}
			\end{itemize}
	\end{itemize}
	
	\includegraphics[scale=0.5]{58}
	
	\subsection{Exercice 5 : }
	\begin{itemize}
		\item Création d’un tunnel SSH entre notre poste et SRV à travers la machine CLI
			\begin{itemize}
				\item \textbf{\textit{\$ ssh -L 2500:srv.local:80 alice@cli.local}}
			\end{itemize}
		\item Test en ouvrant le navigateur sur notre poste local 
	\end{itemize}
	
	\includegraphics[scale=0.5]{69}
	
	\subsection{Exercice 6 :}
	\begin{itemize}
		\item Connexion à CLI en activant le forwarding X11
			\begin{itemize}
				\item \textbf{\textit{\$ ssh -X alice@cli.local}}
			\end{itemize}
		\item Lancement d'une application graphique
	\end{itemize}
	
	\includegraphics[scale=0.5]{70}
	
	\subsection{Exercice 7 :}
	\begin{itemize}
		\item Avec proxyjump :
			\begin{itemize}
				\item \textbf{\textit{\$ ssh -J alice@cli.local bob@srv.local}}
			\end{itemize}
		
	\end{itemize}
	
	\includegraphics[scale=0.4]{59}
	
	\begin{itemize}
		\item Avec ProxyCommand :
		
	\end{itemize}
	\includegraphics[scale=0.4]{61}
	
\newpage
	\section{GIT :}
	\subsection{Exerice 1 :}
	
	\begin{itemize}
		\item \textbf{\textit{\$ mkdir git\_rep}} → création du répertoire de travail \\
			  \textbf{\textit{\$ git init}} → initialisation de git ; \\
			  \textbf{\textit{\$ git status}}  
	\end{itemize}
	\includegraphics[scale=0.4]{1}
	
	\begin{itemize}
		\item \textbf{\textit{\$ vagrant up}} \\
			  \textbf{\textit{\$ vagrant halt}} → initialisation de git ; \\
			  \textbf{\textit{\$ git status}}  ; \\
	\end{itemize}
	
	\includegraphics[scale=0.37]{2} \\
	
	Nous constatons que le dossier \textbf{\textit{".vagrant"}} a été ajouté aux fichiers suivi, alors qu’il ne devrait pas y être.
	Pour l’enlever il suffit d’ajout dans le fichier \textbf{\textit{".gitignore"}} la valeur suivant : \textbf{\textit{".vagrant"}} \\
	
	\includegraphics[scale=0.37]{3}
	
	\begin{itemize}
		\item \textbf{\textit{\$ git add Vagrantfile srv}}
	\end{itemize}
	\includegraphics[scale=0.37]{4}
	
	\begin{itemize}
		\item \textbf{\textit{\$ git commit -m "commit\_1"}}
	\end{itemize}
	\includegraphics[scale=0.37]{5}
	
	\begin{itemize}
		\item \textbf{\textit{\$ git show}}
	\end{itemize}
	\includegraphics[scale=0.37]{6}
	
	\subsection{Exercice 2 :}
	\begin{itemize}
		\item Création d'une nouvelle branche
		\begin{itemize}
			\item \textbf{\textit{\$ git checkout -b branche\_1}}
		\end{itemize}
		\item Ajout de l'utilisateur Patrick
	\end{itemize}
	\includegraphics[scale=0.4]{7}
	
	\begin{itemize}
		\item Installation et activation de php dans apache
	\end{itemize}
	\includegraphics[scale=0.4]{8}
	\begin{itemize}
		\item effectuer deux commits distincts
	\end{itemize}
	\includegraphics[scale=0.4]{9}
	\begin{itemize}
		\item Revenir à la branche master (main)
	\end{itemize}
	\includegraphics[scale=0.4]{11}
	
	\begin{itemize}
		\item L'état de notre working directory
	\end{itemize}
	\includegraphics[scale=0.4]{13}
	
	\subsection{Exercice 3 :}
	\begin{itemize}
		\item Intégration des nouvelles modifications
		\begin{itemize}
			\item \textbf{\textit{\$ git merge branche\_1}}
		\end{itemize}
	\end{itemize}
	\includegraphics[scale=0.5]{17}
	
	\begin{itemize}
		\item Oui la branche existe toujours, et pour la supprimer il faut :
		\begin{itemize}
			\item \textbf{\textit{\$ git branche -d branche\_1}}
		\end{itemize}
	\end{itemize}
	\includegraphics[scale=0.5]{18}
	
	\subsection{Exercice 3 bis :}
	\begin{itemize}
		\item Création d'une nouvelle branche :
		\begin{itemize}
			\item \textbf{\textit{\$ git checkout -b forwarde-new-port}}
		\end{itemize}
	\end{itemize}
	\includegraphics[scale=0.5]{20}
	
	\begin{itemize}
		\item Modification et commit :
	\end{itemize}
	\includegraphics[scale=0.5]{19}
	

		\begin{itemize}
			\item \textbf{\textit{\$ git commit -a -m  "forwarded-new-port"}}
		\end{itemize}
	\includegraphics[scale=0.5]{22}
	
	\begin{itemize}
		\item Modification sur le master avec le port 8080:
		\begin{itemize}
			\item \textbf{\textit{\$ git checkout master}}
			\item \textbf{\textit{\$ git commit -a -m "port 8080"}}
		\end{itemize}
	\end{itemize}
	\includegraphics[scale=0.5]{23}
	
	\begin{itemize}
		\item –	Essaie de merge forward-new-port dans le master :
		\begin{itemize}
			\item \textbf{\textit{\$ git merge fowarde-new-port}}
		\end{itemize}
	\end{itemize}
	
	\includegraphics[scale=0.4]{24} \\
	\includegraphics[scale=0.4]{25}
\end{document}
